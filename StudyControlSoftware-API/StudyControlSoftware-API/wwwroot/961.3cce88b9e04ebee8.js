"use strict";(self.webpackChunkStudyControlSoftware=self.webpackChunkStudyControlSoftware||[]).push([[961],{3276:(Nt,w,l)=>{l.r(w),l.d(w,{StudentsModule:()=>At});var f=l(6895),I=l(9299),s=l(4006),d=l(3546),m=l(7155),v=l(1581),Z=l(6308),g=l(4859),x=l(7392),_=l(6338),p=l(9549),F=l(4144),u=l(5412),C=l(7331),y=l(7957),E=l(1948),k=l(7943),S=l(4713),U=l(7188),Y=l(5114);class L extends Y.d{constructor(o,e,a,i="",r="",c="",h=!1,T=""){super(o,i,r,c,h,T),this.id=o,this.surname=e,this.lastname=a,this.username=i,this.password=r,this.email=c,this.emailConfirmed=h,this.phoneNumber=T}getFullName(){return this.surname+" "+this.lastname}}var t=l(4650),O=l(2676),q=l(569);let D=(()=>{class n{constructor(e,a){this.dialogRef=e,this.data=a,this.roles=q.uJ,this.title="",this.submitBtnText="",this.onSubmit=new t.vpe,this.newUserForm=new s.cw({surname:new s.NI(a.user.firstName,[s.kI.required,s.kI.minLength(2),s.kI.maxLength(255)]),lastname:new s.NI(a.user.lastName,[s.kI.required,s.kI.minLength(2),s.kI.maxLength(255)]),username:new s.NI(a.user.username,[s.kI.required,s.kI.maxLength(16),s.kI.pattern("(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$")]),password:new s.NI("",[s.kI.required,s.kI.minLength(8),s.kI.maxLength(64),s.kI.pattern("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[@$!%*?&=#])[A-Za-z0-9@$!%*?&=#]+$")]),confirmPassword:new s.NI("",[s.kI.required,s.kI.minLength(8),s.kI.maxLength(64),s.kI.pattern("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[@$!%*?&=#])[A-Za-z0-9@$!%*?&=#]+$")]),email:new s.NI(a.user.email,[s.kI.required,s.kI.email]),phoneNumber:new s.NI(a.user.phoneNumber)})}onSubmitEvent(){this.newUserForm.valid&&this.onSubmit.emit({id:this.data.user.id,user:new O.a(this.data.user.id,this.newUserForm.controls.surname.value,this.newUserForm.controls.lastname.value,this.newUserForm.controls.username.value,this.newUserForm.controls.password.value,this.newUserForm.controls.confirmPassword.value,this.newUserForm.controls.email.value,this.newUserForm.controls.phoneNumber.value)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.so),t.Y36(u.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dashboard-student-new"]],inputs:{title:"title",submitBtnText:"submitBtnText"},outputs:{onSubmit:"onSubmit"},decls:82,vars:8,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["novalidate","",3,"formGroup"],["userForm",""],["appearance","outline"],["type","text","matInput","","placeholder","Surname","formControlName","surname"],["surname",""],["align","end"],["type","text","matInput","","placeholder","Lastname","formControlName","lastname"],["lastname",""],["type","text","matInput","","placeholder","Username","formControlName","username"],["username",""],["type","password","matInput","","placeholder","Password","formControlName","password"],["password",""],["type","password","matInput","","placeholder","Confirm Password","formControlName","confirmPassword"],["confirmPassword",""],["type","text","matInput","","placeholder","Email","formControlName","email"],["email",""],["type","tel","matInput","","placeholder","Phone number","formControlName","phoneNumber"],["mat-dialog-actions","","align","end"],["mat-flat-button","","mat-dialog-close","","color","warn"],["mat-flat-button","","cdkFocusInitial","","color","primary","type","button",3,"click"]],template:function(e,a){if(1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"form",2,3)(5,"mat-card-content")(6,"mat-form-field",4)(7,"mat-label"),t._uU(8,"Enter Surname"),t.qZA(),t._UZ(9,"input",5,6),t.TgZ(11,"mat-hint",7),t._uU(12),t.qZA(),t.TgZ(13,"mat-error"),t._uU(14,"Surname is invalid"),t.qZA()(),t._UZ(15,"br")(16,"br"),t.TgZ(17,"mat-form-field",4)(18,"mat-label"),t._uU(19,"Enter Lastname"),t.qZA(),t._UZ(20,"input",8,9),t.TgZ(22,"mat-hint",7),t._uU(23),t.qZA(),t.TgZ(24,"mat-error"),t._uU(25,"Lastname is invalid"),t.qZA()(),t._UZ(26,"br")(27,"br"),t.TgZ(28,"mat-form-field",4)(29,"mat-label"),t._uU(30,"Enter Username"),t.qZA(),t._UZ(31,"input",10,11),t.TgZ(33,"mat-hint",7),t._uU(34),t.qZA(),t.TgZ(35,"mat-error"),t._uU(36,"Username is invalid"),t.qZA()(),t._UZ(37,"br")(38,"br"),t.TgZ(39,"mat-form-field",4)(40,"mat-label"),t._uU(41,"Enter Password"),t.qZA(),t._UZ(42,"input",12,13),t.TgZ(44,"mat-hint",7),t._uU(45),t.qZA(),t.TgZ(46,"mat-error"),t._uU(47,"Password is invalid"),t.qZA()(),t._UZ(48,"br")(49,"br"),t.TgZ(50,"mat-form-field",4)(51,"mat-label"),t._uU(52,"Confirm Password"),t.qZA(),t._UZ(53,"input",14,15),t.TgZ(55,"mat-hint",7),t._uU(56),t.qZA(),t.TgZ(57,"mat-error"),t._uU(58,"Passwords Mismatch"),t.qZA()(),t._UZ(59,"br")(60,"br"),t.TgZ(61,"mat-form-field",4)(62,"mat-label"),t._uU(63,"Enter Email"),t.qZA(),t._UZ(64,"input",16,17),t.TgZ(66,"mat-error"),t._uU(67,"Email is invalid"),t.qZA()(),t._UZ(68,"br")(69,"br"),t.TgZ(70,"mat-form-field",4)(71,"mat-label"),t._uU(72,"Enter Phone number"),t.qZA(),t._UZ(73,"input",18,15),t.TgZ(75,"mat-error"),t._uU(76,"Phone number is invalid"),t.qZA()()()()(),t.TgZ(77,"div",19)(78,"button",20),t._uU(79,"Cancle"),t.qZA(),t.TgZ(80,"button",21),t.NdJ("click",function(){return a.onSubmitEvent()}),t._uU(81),t.qZA()()),2&e){const i=t.MAs(10),r=t.MAs(21),c=t.MAs(32),h=t.MAs(43),T=t.MAs(54);t.xp6(1),t.Oqu(a.title),t.xp6(2),t.Q6J("formGroup",a.newUserForm),t.xp6(9),t.hij("",i.value.length,"/256"),t.xp6(11),t.hij("",r.value.length,"/256"),t.xp6(11),t.hij("",c.value.length,"/16"),t.xp6(11),t.hij("",h.value.length,"/64"),t.xp6(11),t.hij("",T.value.length,"/64"),t.xp6(25),t.Oqu(a.submitBtnText)}},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,d.dn,g.lW,p.KE,p.hX,p.bx,p.TO,F.Nt,u.ZT,u.uh,u.xY,u.H8],encapsulation:2}),n})();var A=l(7009),N=l(529),J=l(2340),M=l(1162);let b=(()=>{class n extends M.C{constructor(e){super(e,"manageStudents"),this.http=e,this.api="manageStudents",this.api=J.N.config.apiUrl+this.api+"/"}getFaculty(e){return this.http.get(this.api+e+"/getFaculty")}setFaculty(e,a){const i=(new N.LE).set("facultyId",a);return this.http.post(this.api+e+"/setFaculty",null,{params:i})}deleteFaculty(e){return this.http.delete(this.api+e+"/deleteFaculty/")}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(N.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var R=l(3252),Q=l(9789),B=l(2633),H=l(6969),P=l(8641),$=l(8675),j=l(4004),G=l(3238);const z=["facultyInput"];function W(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-chip-row",13),t.NdJ("removed",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.remove())}),t._uU(1),t.TgZ(2,"button",14)(3,"mat-icon"),t._uU(4,"cancel"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(1),t.hij(" ",null==e.faculty?null:e.faculty.name," ")}}function K(n,o){if(1&n&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}let X=(()=>{class n{constructor(e){this.dialogData=e,this.onSubmit=new t.vpe,this.facultyCtrl=new s.NI(""),this.allFaculties=[],this.allFaculties=e.allFaculties,this.filteredFacultys=this.facultyCtrl.valueChanges.pipe((0,$.O)(null),(0,j.U)(a=>a?this._filter(a):this.allFaculties.slice()))}remove(){this.faculty=void 0}selected(e){this.faculty=this.allFaculties.find(a=>a.id==e.option.value),this.facultyInput.nativeElement.value="",this.facultyCtrl.setValue(null)}onSubmitEvent(){this.onSubmit.emit(this.faculty)}_filter(e){try{const a=e.toLowerCase();return this.allFaculties.filter(i=>i.name.toLowerCase().includes(a))}catch{}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dashboard-students-set-faculty"]],viewQuery:function(e,a){if(1&e&&t.Gf(z,5),2&e){let i;t.iGM(i=t.CRH())&&(a.facultyInput=i.first)}},outputs:{onSubmit:"onSubmit"},decls:21,vars:7,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["appearance","fill",2,"width","100%"],["chipGrid",""],[3,"removed",4,"ngIf"],["placeholder","Type faculty name",3,"formControl","matChipInputFor","matAutocomplete"],["facultyInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","",1,"actions"],["mat-flat-button","","mat-dialog-close","","color","warn"],["mat-flat-button","","color","primary","type","submit","cdkFocusInitial","",3,"click"],[3,"removed"],["matChipRemove",""],[3,"value"]],template:function(e,a){if(1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Set Faculty"),t.qZA(),t.TgZ(2,"div",1)(3,"form")(4,"mat-form-field",2)(5,"mat-label"),t._uU(6,"Faculty"),t.qZA(),t.TgZ(7,"mat-chip-grid",null,3),t.YNc(9,W,5,1,"mat-chip-row",4),t.qZA(),t._UZ(10,"input",5,6),t.TgZ(12,"mat-autocomplete",7,8),t.NdJ("optionSelected",function(r){return a.selected(r)}),t.YNc(14,K,2,2,"mat-option",9),t.ALo(15,"async"),t.qZA()()()(),t.TgZ(16,"div",10)(17,"button",11),t._uU(18," Cancle "),t.qZA(),t.TgZ(19,"button",12),t.NdJ("click",function(){return a.onSubmitEvent()}),t._uU(20," Add "),t.qZA()()),2&e){const i=t.MAs(8),r=t.MAs(13);t.xp6(9),t.Q6J("ngIf",a.faculty),t.xp6(1),t.Q6J("formControl",a.facultyCtrl)("matChipInputFor",i)("matAutocomplete",r),t.xp6(4),t.Q6J("ngForOf",t.lcZ(15,5,a.filteredFacultys))}},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.F,s.oH,f.sg,f.O5,g.lW,x.Hw,p.KE,p.hX,u.ZT,u.uh,u.xY,u.H8,C.RA,C.oH,C.qH,C.z3,y.XC,G.ey,y.ZL,f.Ov],encapsulation:2}),n})();function V(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-list-item",2),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.setFaculty())}),t.TgZ(1,"mat-icon",3),t._uU(2,"add"),t.qZA(),t.TgZ(3,"div",4),t._uU(4,"Set Faculty"),t.qZA()()}}function tt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-list-item",5)(1,"mat-icon",6),t._uU(2,"account_box"),t.qZA(),t.TgZ(3,"div",4),t._uU(4),t.qZA(),t.TgZ(5,"button",7),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.removeFaculty())}),t.TgZ(6,"mat-icon",8),t._uU(7,"close"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(4),t.Oqu(null==e.faculty?null:e.faculty.name)}}let et=(()=>{class n{constructor(e,a,i){this.dialog=e,this._snackBar=a,this.studentsService=i,this.allFaculties=[]}ngOnInit(){this.getData()}getData(){this.studentsService.getFaculty(this.studentIndex).subscribe(e=>{this.faculty=e})}setFaculty(){this.openSetFacultyDialog()}openSetFacultyDialog(){this.setFacultyDialogRef=this.dialog.open(X,{width:"500px",data:{allFaculties:this.allFaculties}}),this.setFacultyDialogRef.componentInstance.onSubmit.subscribe(e=>{this.set(e)})}set(e){this.studentsService.setFaculty(this.studentIndex,e.id).subscribe(a=>{this._snackBar.open("Faculty set successful!","Ok",{duration:1e4}),this.setFacultyDialogRef.close(),this.getData()})}removeFaculty(){this.openDeleteDialog()}openDeleteDialog(){this.dialog.open(U.F,{width:"250px",data:{value:this.faculty.name,isDelete:"false"}}).afterClosed().subscribe(a=>{a&&this.delete()})}delete(){this.studentsService.deleteFaculty(this.studentIndex).subscribe(()=>{this._snackBar.open("Faculty deleted successful!","Ok",{duration:1e4}),this.setFacultyDialogRef?.close(),this.getData()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.uw),t.Y36(A.ux),t.Y36(b))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dashboard-set-faculty"]],inputs:{studentIndex:"studentIndex",allFaculties:"allFaculties"},decls:10,vars:2,consts:[["class","add-list-item","role","lecturer",3,"click",4,"ngIf","ngIfElse"],["faultyItem",""],["role","lecturer",1,"add-list-item",3,"click"],["matListItemIcon",""],["matListItemTitle",""],["role","faculty"],["matListItemIcon","","color","primary"],["mat-icon-button","","matListItemMeta","",3,"click"],["color","warn"]],template:function(e,a){if(1&e&&(t.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),t._uU(3,"Faculty"),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5,"Manage faculty for current student"),t.qZA()(),t.TgZ(6,"mat-list"),t.YNc(7,V,5,0,"mat-list-item",0),t.YNc(8,tt,8,1,"ng-template",null,1,t.W1O),t.qZA()()),2&e){const i=t.MAs(9);t.xp6(7),t.Q6J("ngIf",null===a.faculty)("ngIfElse",i)}},dependencies:[f.O5,d.a8,d.dk,d.$j,d.n5,g.RK,x.Hw,_.i$,_.Tg,_.Yt,_.sL,_.ni],encapsulation:2}),n})();function nt(n,o){1&n&&(t.TgZ(0,"th",20),t._uU(1," No. "),t.qZA())}function at(n,o){if(1&n&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function ot(n,o){1&n&&(t.TgZ(0,"th",20),t._uU(1," Full Name "),t.qZA())}function it(n,o){if(1&n&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.AsE(" ",e.firstName," ",e.lastName," ")}}function st(n,o){1&n&&(t.TgZ(0,"th",20),t._uU(1," Username "),t.qZA())}function lt(n,o){if(1&n&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.username," ")}}function rt(n,o){1&n&&(t.TgZ(0,"th",20),t._uU(1," Email "),t.qZA())}function ct(n,o){if(1&n&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.email," ")}}function ut(n,o){1&n&&(t.TgZ(0,"th",20),t._uU(1," Email Confirmed "),t.qZA())}function mt(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1,"true"),t.qZA())}function dt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.onConfirmEmailEvent(i.email))}),t._uU(1," Send Confirm Email "),t.qZA()}}function pt(n,o){if(1&n&&(t.TgZ(0,"td",21),t.YNc(1,mt,2,0,"span",22),t.YNc(2,dt,2,0,"button",23),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.emailConfirmed),t.xp6(1),t.Q6J("ngIf",!e.emailConfirmed)}}function ht(n,o){1&n&&(t.TgZ(0,"th",20),t._uU(1," Phone Number "),t.qZA())}function ft(n,o){if(1&n&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.phoneNumber," ")}}function gt(n,o){1&n&&(t.TgZ(0,"th",25),t._uU(1," Actions "),t.qZA())}function _t(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td",21)(1,"button",26),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onEditEvent(r))}),t._uU(2," Edit "),t.qZA(),t.TgZ(3,"button",27),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onDeleteEvent(r.id,r.username))}),t._uU(4," Delete "),t.qZA()()}}function Ct(n,o){1&n&&(t.TgZ(0,"th",28),t._uU(1,"Add lecturer"),t.qZA())}function Zt(n,o){1&n&&(t.TgZ(0,"mat-icon"),t._uU(1,"keyboard_arrow_down"),t.qZA())}function xt(n,o){1&n&&(t.TgZ(0,"mat-icon"),t._uU(1,"keyboard_arrow_up"),t.qZA())}function Tt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td",21)(1,"div",29)(2,"button",30),t.NdJ("click",function(i){const c=t.CHM(e).$implicit,h=t.oxw();return h.expandedElement=h.expandedElement===c?null:c,t.KtG(i.stopPropagation())}),t.YNc(3,Zt,2,0,"mat-icon",22),t.YNc(4,xt,2,0,"mat-icon",22),t.qZA()()()}if(2&n){const e=o.$implicit,a=t.oxw();t.xp6(3),t.Q6J("ngIf",a.expandedElement!==e),t.xp6(1),t.Q6J("ngIf",a.expandedElement===e)}}function vt(n,o){if(1&n&&(t.TgZ(0,"td",21)(1,"div",31),t._UZ(2,"app-dashboard-set-faculty",32),t.qZA()()),2&n){const e=o.$implicit,a=t.oxw();t.ekj("row-is-expanded",a.expandedElement===e),t.uIk("colspan",a.columnsToDisplayWithExpand.length),t.xp6(1),t.Q6J("@detailExpand",e==a.expandedElement?"expanded":"collapsed"),t.xp6(1),t.Q6J("studentIndex",e.id)("allFaculties",a.allFaculties)}}function yt(n,o){1&n&&t._UZ(0,"tr",33)}function St(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"tr",34),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.expandedElement=c.expandedElement===r?null:r)}),t.qZA()}}function bt(n,o){1&n&&t._UZ(0,"tr",35)}const wt=function(){return["expandedDetail"]},Ft=function(){return[5,10,20]};let Ut=(()=>{class n{constructor(){this.data=[],this.resultsLength=0,this.allFaculties=[],this.onChange=new t.vpe,this.onDelete=new t.vpe,this.onEdit=new t.vpe,this.onConfirmEmail=new t.vpe,this.userListOptions=new S.j("","",0,0),this.columnsToDisplay=["fullName","username","email","emailConfirmed","phoneNumber","actions"],this.columnsToDisplayWithExpand=[...this.columnsToDisplay,"expand"]}ngAfterViewInit(){this.onChangeEvent(),this.sort.sortChange.subscribe(()=>{this.paginator.pageIndex=0,this.onChangeEvent()}),this.paginator.page.subscribe(()=>{this.onChangeEvent()})}onChangeEvent(){this.userListOptions.sort=this.sort.active,this.userListOptions.sortDirection=this.sort.direction,this.userListOptions.pageIndex=this.paginator.pageIndex,this.userListOptions.pageSize=this.paginator.pageSize,this.onChange.emit(this.userListOptions)}onDeleteEvent(e,a){this.onDelete.emit({id:e,username:a})}onEditEvent(e){this.onEdit.emit(e)}onConfirmEmailEvent(e){this.onConfirmEmail.emit(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dashboard-students-card"]],viewQuery:function(e,a){if(1&e&&(t.Gf(m.BZ,5),t.Gf(Z.YE,5),t.Gf(v.NW,5)),2&e){let i;t.iGM(i=t.CRH())&&(a.table=i.first),t.iGM(i=t.CRH())&&(a.sort=i.first),t.iGM(i=t.CRH())&&(a.paginator=i.first)}},inputs:{data:"data",resultsLength:"resultsLength",allFaculties:"allFaculties"},outputs:{onChange:"onChange",onDelete:"onDelete",onEdit:"onEdit",onConfirmEmail:"onConfirmEmail"},decls:36,vars:7,consts:[[1,"card"],["mat-table","","multiTemplateDataRows","","matSort","","matSortActive","fullName","matSortDirection","asc","matSortDisableClear","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","fullName"],["matColumnDef","username"],["matColumnDef","email"],["matColumnDef","emailConfirmed"],["matColumnDef","phoneNumber"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","expand","stickyEnd",""],["mat-header-cell","","aria-label","row actions",4,"matHeaderCellDef"],["matColumnDef","expandedDetail"],["mat-cell","",3,"row-is-expanded",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","element-row",3,"click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","expanded-row",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngIf"],["mat-flat-button","","color","accent",3,"click",4,"ngIf"],["mat-flat-button","","color","accent",3,"click"],["mat-header-cell",""],["mat-flat-button","","color","accent",1,"action-btn",3,"click"],["mat-flat-button","","color","warn",1,"action-btn",3,"click"],["mat-header-cell","","aria-label","row actions"],[1,"expand-row-container"],["mat-icon-button","","aria-label","expand row",3,"click"],[3,"className"],[3,"studentIndex","allFaculties"],["mat-header-row",""],["mat-row","",1,"element-row",3,"click"],["mat-row","",1,"expanded-row"]],template:function(e,a){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),t._uU(3," Students "),t.qZA()(),t.TgZ(4,"mat-card-content")(5,"table",1),t.ynx(6,2),t.YNc(7,nt,2,0,"th",3),t.YNc(8,at,2,1,"td",4),t.BQk(),t.ynx(9,5),t.YNc(10,ot,2,0,"th",3),t.YNc(11,it,2,2,"td",4),t.BQk(),t.ynx(12,6),t.YNc(13,st,2,0,"th",3),t.YNc(14,lt,2,1,"td",4),t.BQk(),t.ynx(15,7),t.YNc(16,rt,2,0,"th",3),t.YNc(17,ct,2,1,"td",4),t.BQk(),t.ynx(18,8),t.YNc(19,ut,2,0,"th",3),t.YNc(20,pt,3,2,"td",4),t.BQk(),t.ynx(21,9),t.YNc(22,ht,2,0,"th",3),t.YNc(23,ft,2,1,"td",4),t.BQk(),t.ynx(24,10),t.YNc(25,gt,2,0,"th",11),t.YNc(26,_t,5,0,"td",4),t.BQk(),t.ynx(27,12),t.YNc(28,Ct,2,0,"th",13),t.YNc(29,Tt,5,2,"td",4),t.BQk(),t.ynx(30,14),t.YNc(31,vt,3,6,"td",15),t.BQk(),t.YNc(32,yt,1,0,"tr",16),t.YNc(33,St,1,0,"tr",17),t.YNc(34,bt,1,0,"tr",18),t.qZA(),t._UZ(35,"mat-paginator",19),t.qZA()()),2&e&&(t.xp6(5),t.Q6J("dataSource",a.data),t.xp6(27),t.Q6J("matHeaderRowDef",a.columnsToDisplayWithExpand),t.xp6(1),t.Q6J("matRowDefColumns",a.columnsToDisplayWithExpand),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(5,wt)),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(6,Ft)))},dependencies:[f.O5,d.a8,d.dn,d.dk,d.n5,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,v.NW,Z.YE,Z.nU,g.lW,g.RK,x.Hw,et],styles:["tr.expanded-row[_ngcontent-%COMP%]{height:0}.element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}tr.element-row[_ngcontent-%COMP%]:hover{background:whitesmoke}tr.element-row[_ngcontent-%COMP%]:active{background:#efefef}.expand-row-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.mat-mdc-table-sticky-border-elem-right[_ngcontent-%COMP%]{border-left:1px solid #e0e0e0}.mat-mdc-table-sticky-border-elem-left[_ngcontent-%COMP%]{border-right:1px solid #e0e0e0}.mat-column-expandedDetail.row-is-expanded[_ngcontent-%COMP%]{padding:10px}"],data:{animation:[P.i]}}),n})();const Dt=[{path:"",component:(()=>{class n{constructor(e,a,i,r,c){this.dialog=e,this._snackBar=a,this.studentsService=i,this.authService=r,this.facultyService=c,this.data=[],this.resultsLength=0,this.allFaculties=[]}ngOnInit(){this.facultyService.getAll(new S.j("id","asc",0,999)).subscribe(e=>{this.allFaculties=e.entities})}onChangeUserCard(e){this.userListOptions=e,this.getUsers()}getUsers(){this.studentsService.getAll(new S.j(this.userListOptions.sort,this.userListOptions.sortDirection,this.userListOptions.pageIndex,this.userListOptions.pageSize)).subscribe(e=>{this.data=e.entities,this.resultsLength=e.totalCount})}onNew(){this.openNewDialog()}openNewDialog(){this.createDialogRef=this.dialog.open(D,{width:"500px",data:{user:new L("","","","","","",!1,"")}}),this.createDialogRef.componentInstance.title="Create new Student",this.createDialogRef.componentInstance.submitBtnText="Create",this.createDialogRef.componentInstance.onSubmit.subscribe(e=>{this.new(e)})}new(e){this.studentsService.create(e.user).subscribe({next:a=>{this._snackBar.open("User created successful!","Ok",{duration:1e4}),this.createDialogRef.close(),this.getUsers()},error:a=>{this._snackBar.open("Validating error!","Ok",{duration:1e4})}})}onDelete(e){this.openDeleteDialog(e.id,e.username)}openDeleteDialog(e,a){this.dialog.open(U.F,{width:"250px",data:{value:a,isDelete:"false"}}).afterClosed().subscribe(r=>{r&&this.delete(e)})}delete(e){this.studentsService.delete(e).subscribe(()=>{this._snackBar.open("User deleted!","Ok",{duration:1e4}),this.getUsers()})}onEdit(e){this.openEditDialog(e)}openEditDialog(e){this.createDialogRef=this.dialog.open(D,{width:"500px",data:{user:e}}),this.createDialogRef.componentInstance.title="Edit User",this.createDialogRef.componentInstance.submitBtnText="Edit",this.createDialogRef.componentInstance.onSubmit.subscribe(a=>{this.edit(a.id,a.user)})}edit(e,a){this.studentsService.edit(e,a).subscribe(i=>{this._snackBar.open(i.username+" user changed!","Ok",{duration:1e4}),this.createDialogRef.close(),this.getUsers()})}onConfirmEmail(e){this.authService.sendConfirmEmail(e).subscribe(a=>{this._snackBar.open("Message sended!","Ok",{duration:1e4})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.uw),t.Y36(A.ux),t.Y36(b),t.Y36(R.e),t.Y36(Q.E))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dashboard-students"]],decls:3,vars:3,consts:[[3,"onNew"],[3,"data","resultsLength","allFaculties","onChange","onDelete","onEdit","onConfirmEmail"]],template:function(e,a){1&e&&(t.TgZ(0,"app-dashboard-layout")(1,"app-dashboard-actions-new",0),t.NdJ("onNew",function(){return a.onNew()}),t.qZA(),t.TgZ(2,"app-dashboard-students-card",1),t.NdJ("onChange",function(r){return a.onChangeUserCard(r)})("onDelete",function(r){return a.onDelete(r)})("onEdit",function(r){return a.onEdit(r)})("onConfirmEmail",function(r){return a.onConfirmEmail(r)}),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("data",a.data)("resultsLength",a.resultsLength)("allFaculties",a.allFaculties))},dependencies:[B.n,H.h,Ut],encapsulation:2}),n})()}];let At=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[b],imports:[k.m,I.Bz.forChild(Dt),s.u5,s.UX,f.ez,d.QW,m.p0,v.TU,Z.JX,g.ot,x.Ps,_.ie,p.lN,F.c,u.Is,C.Hi,y.Bb,E.Fk]}),n})()}}]);