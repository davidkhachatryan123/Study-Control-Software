"use strict";(self.webpackChunkStudyControlSoftware=self.webpackChunkStudyControlSoftware||[]).push([[730],{8730:(pt,T,s)=>{s.r(T),s.d(T,{FacultyModule:()=>mt});var f=s(6895),S=s(9299),r=s(4006),m=s(3546),u=s(7155),v=s(1581),_=s(6308),p=s(4859),y=s(7392),h=s(6338),C=s(9549),Z=s(4144),c=s(5412),g=s(7331),x=s(7957),I=s(7943),t=s(4650);class b{constructor(a,e){this.id=a,this.name=e}}let F=(()=>{class o{constructor(e,n){this.dialogRef=e,this.data=n,this.onSubmit=new t.vpe,this.newFormGroup=new r.cw({faculty:new r.NI(n.model.name,[r.kI.required,r.kI.minLength(1),r.kI.maxLength(100)])})}onSubmitEvent(){this.newFormGroup.valid&&this.onSubmit.emit({id:this.data.model.id,model:new b(this.data.model.id,this.newFormGroup.controls.faculty.value)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(c.so),t.Y36(c.WI))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-dashboard-faculty-new"]],inputs:{title:"title",submitBtnText:"submitBtnText"},outputs:{onSubmit:"onSubmit"},decls:17,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["novalidate","",3,"formGroup"],["userForm",""],["appearance","outline"],["matInput","","type","text","placeholder","Faculty","formControlName","faculty"],["mat-dialog-actions","","align","end"],["mat-flat-button","","mat-dialog-close","","color","warn"],["mat-flat-button","","color","primary","type","submit",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"form",2,3)(5,"mat-card-content")(6,"mat-form-field",4)(7,"mat-label"),t._uU(8,"Faculty name"),t.qZA(),t._UZ(9,"input",5),t.TgZ(10,"mat-error"),t._uU(11,"Faculty Name is invalid"),t.qZA()()()()(),t.TgZ(12,"div",6)(13,"button",7),t._uU(14," Cancle "),t.qZA(),t.TgZ(15,"button",8),t.NdJ("click",function(){return n.onSubmitEvent()}),t._uU(16),t.qZA()()),2&e&&(t.xp6(1),t.Oqu(n.title),t.xp6(2),t.Q6J("formGroup",n.newFormGroup),t.xp6(13),t.hij(" ",n.submitBtnText," "))},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,m.dn,p.lW,C.KE,C.hX,C.TO,Z.Nt,c.ZT,c.uh,c.xY,c.H8],encapsulation:2}),o})();var A=s(7188),D=s(4713),E=s(7009),w=s(9789),O=s(1393),U=s(2633),L=s(6969),J=s(8641),R=s(8675),k=s(4004),Y=s(2937),M=s(3238);const Q=["courseInput"];function B(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"mat-chip-row",13),t.NdJ("removed",function(){const l=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.remove(l))}),t._uU(1),t.TgZ(2,"button",14)(3,"mat-icon"),t._uU(4,"cancel"),t.qZA()()()}if(2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.title," ")}}function H(o,a){if(1&o&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}let G=(()=>{class o{constructor(e){this.dialogData=e,this.onSubmit=new t.vpe,this.courseCtrl=new r.NI(""),this.courses=[],this.allCourses=[],this.allCourses=e.allCourses,this.filteredCourses=this.courseCtrl.valueChanges.pipe((0,R.O)(null),(0,k.U)(n=>n?this._filter(n):this.allCourses.map(i=>i.title).slice()))}remove(e){const n=this.courses.indexOf(e);n>=0&&this.courses.splice(n,1)}selected(e){this.courses.push(new Y.T(this.allCourses.find(n=>n.title==e.option.value).id,e.option.value,"")),this.courseInput.nativeElement.value="",this.courseCtrl.setValue(null)}onSubmitEvent(){this.onSubmit.emit(this.courses)}_filter(e){const n=e.toLowerCase();return this.allCourses.map(i=>i.title).filter(i=>i.toLowerCase().includes(n))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(c.WI))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-dashboard-faculty-new"]],viewQuery:function(e,n){if(1&e&&t.Gf(Q,5),2&e){let i;t.iGM(i=t.CRH())&&(n.courseInput=i.first)}},outputs:{onSubmit:"onSubmit"},decls:21,vars:7,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["appearance","fill",2,"width","100%"],["chipGrid",""],[3,"removed",4,"ngFor","ngForOf"],["placeholder","Type course name",3,"formControl","matChipInputFor","matAutocomplete"],["courseInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","",1,"actions"],["mat-flat-button","","mat-dialog-close","","color","warn"],["mat-flat-button","","color","primary","type","submit","cdkFocusInitial","",3,"click"],[3,"removed"],["matChipRemove",""],[3,"value"]],template:function(e,n){if(1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Add course"),t.qZA(),t.TgZ(2,"div",1)(3,"form")(4,"mat-form-field",2)(5,"mat-label"),t._uU(6,"Course"),t.qZA(),t.TgZ(7,"mat-chip-grid",null,3),t.YNc(9,B,5,1,"mat-chip-row",4),t.qZA(),t._UZ(10,"input",5,6),t.TgZ(12,"mat-autocomplete",7,8),t.NdJ("optionSelected",function(l){return n.selected(l)}),t.YNc(14,H,2,2,"mat-option",9),t.ALo(15,"async"),t.qZA()()()(),t.TgZ(16,"div",10)(17,"button",11),t._uU(18," Cancle "),t.qZA(),t.TgZ(19,"button",12),t.NdJ("click",function(){return n.onSubmitEvent()}),t._uU(20," Add "),t.qZA()()),2&e){const i=t.MAs(8),l=t.MAs(13);t.xp6(9),t.Q6J("ngForOf",n.courses),t.xp6(1),t.Q6J("formControl",n.courseCtrl)("matChipInputFor",i)("matAutocomplete",l),t.xp6(4),t.Q6J("ngForOf",t.lcZ(15,5,n.filteredCourses))}},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.F,r.oH,f.sg,p.lW,y.Hw,C.KE,C.hX,c.ZT,c.uh,c.xY,c.H8,g.RA,g.oH,g.qH,g.z3,x.XC,M.ey,x.ZL,f.Ov],encapsulation:2}),o})();var j=s(4850);function $(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"mat-list",4)(2,"mat-list-item",5)(3,"mat-icon",2),t._uU(4,"school"),t.qZA(),t.TgZ(5,"div",3),t._uU(6),t.qZA(),t.TgZ(7,"button",6),t.NdJ("click",function(){const l=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.deleteCourse(l))}),t.TgZ(8,"mat-icon",7),t._uU(9,"close"),t.qZA()()()(),t._UZ(10,"mat-divider"),t.qZA()}if(2&o){const e=a.$implicit;t.xp6(6),t.Oqu(e.title)}}let W=(()=>{class o{constructor(e,n,i){this.dialog=e,this._snackBar=n,this.facultyService=i,this.allCourses=[],this.addedCourses=[]}ngOnInit(){this.getData()}getData(){this.facultyService.getCourses(this.facultyIndex).subscribe(e=>{this.addedCourses=e})}addCourse(){this.openAddCourseDialog()}openAddCourseDialog(){this.addCourseDialogRef=this.dialog.open(G,{width:"500px",data:{allCourses:this.allCourses}}),this.addCourseDialogRef.componentInstance.onSubmit.subscribe(e=>{this.add(e)})}add(e){this.facultyService.addCourses(this.facultyIndex,e.map(n=>n.id)).subscribe(()=>{this._snackBar.open("Course(s) added successful!","Ok",{duration:1e4}),this.addCourseDialogRef.close(),this.getData()})}deleteCourse(e){this.openDeleteDialog(e)}openDeleteDialog(e){this.dialog.open(A.F,{width:"250px",data:{value:e.title,isDelete:"false"}}).afterClosed().subscribe(i=>{i&&this.delete(e.id)})}delete(e){this.facultyService.deleteCourse(this.facultyIndex,e).subscribe(()=>{this._snackBar.open("Deleted successful!","Ok",{duration:1e4}),this.addCourseDialogRef?.close(),this.getData()})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(c.uw),t.Y36(E.ux),t.Y36(w.E))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-dashboard-add-course-list"]],inputs:{facultyIndex:"facultyIndex",allCourses:"allCourses"},decls:12,vars:1,consts:[[4,"ngFor","ngForOf"],["role","course",1,"add-list-item",3,"click"],["matListItemIcon",""],["matListItemTitle",""],["role","courses"],["role","course"],["mat-icon-button","","matListItemMeta","",3,"click"],["color","warn"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),t._uU(3,"Courses"),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5,"Add courses to faculty"),t.qZA()(),t.YNc(6,$,11,1,"div",0),t.TgZ(7,"mat-list-item",1),t.NdJ("click",function(){return n.addCourse()}),t.TgZ(8,"mat-icon",2),t._uU(9,"add"),t.qZA(),t.TgZ(10,"div",3),t._uU(11,"Add Course"),t.qZA()()()),2&e&&(t.xp6(6),t.Q6J("ngForOf",n.addedCourses))},dependencies:[f.sg,m.a8,m.dk,m.$j,m.n5,p.RK,y.Hw,h.i$,h.Tg,h.Yt,j.d,h.sL,h.ni],encapsulation:2}),o})();function q(o,a){1&o&&(t.TgZ(0,"th",16),t._uU(1," No. "),t.qZA())}function P(o,a){if(1&o&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function X(o,a){1&o&&(t.TgZ(0,"th",16),t._uU(1," Faculty Name "),t.qZA())}function K(o,a){if(1&o&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function z(o,a){1&o&&(t.TgZ(0,"th",18),t._uU(1," Actions "),t.qZA())}function V(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"td",17)(1,"button",19),t.NdJ("click",function(){const l=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.onEditEvent(l))}),t._uU(2," Edit "),t.qZA(),t.TgZ(3,"button",20),t.NdJ("click",function(){const l=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.onDeleteEvent(l))}),t._uU(4," Delete "),t.qZA()()}}function tt(o,a){1&o&&(t.TgZ(0,"th",21),t._uU(1,"Add course"),t.qZA())}function et(o,a){1&o&&(t.TgZ(0,"mat-icon"),t._uU(1,"keyboard_arrow_down"),t.qZA())}function ot(o,a){1&o&&(t.TgZ(0,"mat-icon"),t._uU(1,"keyboard_arrow_up"),t.qZA())}function nt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"td",17)(1,"div",22)(2,"button",23),t.NdJ("click",function(i){const d=t.CHM(e).$implicit,N=t.oxw();return N.expandedElement=N.expandedElement===d?null:d,t.KtG(i.stopPropagation())}),t.YNc(3,et,2,0,"mat-icon",24),t.YNc(4,ot,2,0,"mat-icon",24),t.qZA()()()}if(2&o){const e=a.$implicit,n=t.oxw();t.xp6(3),t.Q6J("ngIf",n.expandedElement!==e),t.xp6(1),t.Q6J("ngIf",n.expandedElement===e)}}function at(o,a){if(1&o&&(t.TgZ(0,"td",17)(1,"div",25),t._UZ(2,"app-dashboard-add-course-list",26),t.qZA()()),2&o){const e=a.$implicit,n=t.oxw();t.ekj("row-is-expanded",n.expandedElement===e),t.uIk("colspan",n.columnsToDisplayWithExpand.length),t.xp6(1),t.Q6J("@detailExpand",e==n.expandedElement?"expanded":"collapsed"),t.xp6(1),t.Q6J("facultyIndex",e.id)("allCourses",n.allCourses)}}function it(o,a){1&o&&t._UZ(0,"tr",27)}function st(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr",28),t.NdJ("click",function(){const l=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.expandedElement=d.expandedElement===l?null:l)}),t.qZA()}}function lt(o,a){1&o&&t._UZ(0,"tr",29)}const rt=function(){return["expandedDetail"]},ct=function(){return[5,10,20]};let dt=(()=>{class o{constructor(){this.data=[],this.resultsLength=0,this.allCourses=[],this.onChange=new t.vpe,this.onEdit=new t.vpe,this.onDelete=new t.vpe,this.userListOptions=new D.j("","",0,0),this.columnsToDisplay=["name","actions"],this.columnsToDisplayWithExpand=[...this.columnsToDisplay,"expand"]}ngAfterViewInit(){this.onChangeEvent(),this.sort.sortChange.subscribe(()=>{this.paginator.pageIndex=0,this.onChangeEvent()}),this.paginator.page.subscribe(()=>{this.onChangeEvent()})}onChangeEvent(){this.userListOptions.sort=this.sort.active,this.userListOptions.sortDirection=this.sort.direction,this.userListOptions.pageIndex=this.paginator.pageIndex,this.userListOptions.pageSize=this.paginator.pageSize,this.onChange.emit(this.userListOptions)}onEditEvent(e){this.onEdit.emit(e)}onDeleteEvent(e){this.onDelete.emit(e)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-dashboard-faculity-card"]],viewQuery:function(e,n){if(1&e&&(t.Gf(u.BZ,5),t.Gf(_.YE,5),t.Gf(v.NW,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.table=i.first),t.iGM(i=t.CRH())&&(n.sort=i.first),t.iGM(i=t.CRH())&&(n.paginator=i.first)}},inputs:{data:"data",resultsLength:"resultsLength",allCourses:"allCourses"},outputs:{onChange:"onChange",onEdit:"onEdit",onDelete:"onDelete"},decls:24,vars:8,consts:[[1,"card"],["mat-table","","multiTemplateDataRows","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","expand","stickyEnd",""],["mat-header-cell","","aria-label","row actions",4,"matHeaderCellDef"],["matColumnDef","expandedDetail"],["mat-cell","",3,"row-is-expanded",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","element-row",3,"click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","expanded-row",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions","length"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-flat-button","","color","accent",1,"action-btn",3,"click"],["mat-flat-button","","color","warn",1,"action-btn",3,"click"],["mat-header-cell","","aria-label","row actions"],[1,"expand-row-container"],["mat-icon-button","","aria-label","expand row",3,"click"],[4,"ngIf"],[3,"className"],[3,"facultyIndex","allCourses"],["mat-header-row",""],["mat-row","",1,"element-row",3,"click"],["mat-row","",1,"expanded-row"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),t._uU(3," Faculties "),t.qZA()(),t.TgZ(4,"mat-card-content")(5,"table",1),t.ynx(6,2),t.YNc(7,q,2,0,"th",3),t.YNc(8,P,2,1,"td",4),t.BQk(),t.ynx(9,5),t.YNc(10,X,2,0,"th",3),t.YNc(11,K,2,1,"td",4),t.BQk(),t.ynx(12,6),t.YNc(13,z,2,0,"th",7),t.YNc(14,V,5,0,"td",4),t.BQk(),t.ynx(15,8),t.YNc(16,tt,2,0,"th",9),t.YNc(17,nt,5,2,"td",4),t.BQk(),t.ynx(18,10),t.YNc(19,at,3,6,"td",11),t.BQk(),t.YNc(20,it,1,0,"tr",12),t.YNc(21,st,1,0,"tr",13),t.YNc(22,lt,1,0,"tr",14),t.qZA(),t._UZ(23,"mat-paginator",15),t.qZA()()),2&e&&(t.xp6(5),t.Q6J("dataSource",n.data),t.xp6(15),t.Q6J("matHeaderRowDef",n.columnsToDisplayWithExpand),t.xp6(1),t.Q6J("matRowDefColumns",n.columnsToDisplayWithExpand),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(6,rt)),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(7,ct))("length",n.resultsLength))},dependencies:[f.O5,m.a8,m.dn,m.dk,m.n5,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,v.NW,_.YE,_.nU,p.lW,p.RK,y.Hw,W],styles:["tr.expanded-row[_ngcontent-%COMP%]{height:0}.element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}tr.element-row[_ngcontent-%COMP%]:hover{background:whitesmoke}tr.element-row[_ngcontent-%COMP%]:active{background:#efefef}.expand-row-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.mat-mdc-table-sticky-border-elem-right[_ngcontent-%COMP%]{border-left:1px solid #e0e0e0}.mat-mdc-table-sticky-border-elem-left[_ngcontent-%COMP%]{border-right:1px solid #e0e0e0}.mat-column-expandedDetail.row-is-expanded[_ngcontent-%COMP%]{padding:10px}"],data:{animation:[J.i]}}),o})();const ut=[{path:"",component:(()=>{class o{constructor(e,n,i,l){this.dialog=e,this._snackBar=n,this.facultyService=i,this.coursesService=l,this.data=[],this.resultsLength=0,this.allCourses=[]}ngOnInit(){this.coursesService.getAll(new D.j("id","asc",0,999)).subscribe(e=>{this.allCourses=e.entities})}onChangeCard(e){this.userListOptions=e,this.getData()}getData(){this.facultyService.getAll(new D.j(this.userListOptions.sort,this.userListOptions.sortDirection,this.userListOptions.pageIndex,this.userListOptions.pageSize)).subscribe(e=>{this.data=e.entities,this.resultsLength=e.totalCount})}onNew(){this.openNewDialog()}openNewDialog(){this.newDialogRef=this.dialog.open(F,{width:"500px",data:{model:new b(0,"")}}),this.newDialogRef.componentInstance.title="Create new Faculty",this.newDialogRef.componentInstance.submitBtnText="Create",this.newDialogRef.componentInstance.onSubmit.subscribe(e=>{this.new(e)})}new(e){this.facultyService.create(e.model).subscribe({next:n=>{this._snackBar.open("Faculty created successful!","Ok",{duration:1e4}),this.newDialogRef.close(),this.getData()},error:n=>{this._snackBar.open("Validating error!","Ok",{duration:1e4})}})}onEdit(e){this.openEditDialog(e)}openEditDialog(e){this.newDialogRef=this.dialog.open(F,{width:"500px",data:{model:e}}),this.newDialogRef.componentInstance.title="Edit Faculty",this.newDialogRef.componentInstance.submitBtnText="Edit",this.newDialogRef.componentInstance.onSubmit.subscribe(n=>{this.edit(n.id,n.model)})}edit(e,n){this.facultyService.edit(e,n).subscribe(i=>{this._snackBar.open("Faculty are edited!","Ok",{duration:1e4}),this.newDialogRef.close(),this.getData()})}onDelete(e){this.openDeleteDialog(e)}openDeleteDialog(e){this.dialog.open(A.F,{width:"250px",data:{value:e.name,isDelete:"false"}}).afterClosed().subscribe(i=>{i&&this.delete(e.id)})}delete(e){this.facultyService.delete(e).subscribe(()=>{this._snackBar.open("Faculty deleted!","Ok",{duration:1e4}),this.getData()})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(c.uw),t.Y36(E.ux),t.Y36(w.E),t.Y36(O.N))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-dashboard-faculty"]],decls:3,vars:3,consts:[[3,"onNew"],[3,"data","resultsLength","allCourses","onChange","onEdit","onDelete"]],template:function(e,n){1&e&&(t.TgZ(0,"app-dashboard-layout")(1,"app-dashboard-actions-new",0),t.NdJ("onNew",function(){return n.onNew()}),t.qZA(),t.TgZ(2,"app-dashboard-faculity-card",1),t.NdJ("onChange",function(l){return n.onChangeCard(l)})("onEdit",function(l){return n.onEdit(l)})("onDelete",function(l){return n.onDelete(l)}),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("data",n.data)("resultsLength",n.resultsLength)("allCourses",n.allCourses))},dependencies:[U.n,L.h,dt],encapsulation:2}),o})()}];let mt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[w.E],imports:[I.m,S.Bz.forChild(ut),r.u5,r.UX,f.ez,m.QW,u.p0,v.TU,_.JX,p.ot,y.Ps,h.ie,C.lN,Z.c,c.Is,g.Hi,x.Bb]}),o})()}}]);