"use strict";(self.webpackChunkStudyControlSoftware=self.webpackChunkStudyControlSoftware||[]).push([[739],{7739:(mt,_,s)=>{s.r(_),s.d(_,{LecturersModule:()=>lt});var v=s(6895),N=s(9299),a=s(4006),d=s(3546),m=s(7155),C=s(1581),h=s(6308),Z=s(4859),w=s(7392),x=s(6338),p=s(9549),T=s(4144),u=s(5412),A=s(7331),D=s(7957),E=s(1948),I=s(7943),U=s(4713),S=s(7188),y=s(5114);class k extends y.d{constructor(o,e,r,i="",l="",c="",f=!1,g=""){super(o,i,l,c,f,g),this.id=o,this.firstName=e,this.lastName=r,this.username=i,this.password=l,this.email=c,this.emailConfirmed=f,this.phoneNumber=g}}var t=s(4650),Y=s(2676),B=s(569);let b=(()=>{class n{constructor(e,r){this.dialogRef=e,this.data=r,this.roles=B.uJ,this.title="",this.submitBtnText="",this.onSubmit=new t.vpe,this.newUserForm=new a.cw({surname:new a.NI(r.user.firstName,[a.kI.required,a.kI.minLength(2),a.kI.maxLength(255)]),lastname:new a.NI(r.user.lastName,[a.kI.required,a.kI.minLength(2),a.kI.maxLength(255)]),username:new a.NI(r.user.username,[a.kI.required,a.kI.maxLength(16),a.kI.pattern("(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$")]),password:new a.NI("",[a.kI.required,a.kI.minLength(8),a.kI.maxLength(64),a.kI.pattern("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[@$!%*?&=#])[A-Za-z0-9@$!%*?&=#]+$")]),confirmPassword:new a.NI("",[a.kI.required,a.kI.minLength(8),a.kI.maxLength(64),a.kI.pattern("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[@$!%*?&=#])[A-Za-z0-9@$!%*?&=#]+$")]),email:new a.NI(r.user.email,[a.kI.required,a.kI.email]),phoneNumber:new a.NI(r.user.phoneNumber)})}onSubmitEvent(){this.newUserForm.valid&&this.onSubmit.emit({id:this.data.user.id,user:new Y.a(this.data.user.id,this.newUserForm.controls.surname.value,this.newUserForm.controls.lastname.value,this.newUserForm.controls.username.value,this.newUserForm.controls.password.value,this.newUserForm.controls.confirmPassword.value,this.newUserForm.controls.email.value,this.newUserForm.controls.phoneNumber.value)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.so),t.Y36(u.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dashboard-admin-new"]],inputs:{title:"title",submitBtnText:"submitBtnText"},outputs:{onSubmit:"onSubmit"},decls:82,vars:8,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["novalidate","",3,"formGroup"],["userForm",""],["appearance","outline"],["type","text","matInput","","placeholder","Surname","formControlName","surname"],["surname",""],["align","end"],["type","text","matInput","","placeholder","Lastname","formControlName","lastname"],["lastname",""],["type","text","matInput","","placeholder","Username","formControlName","username"],["username",""],["type","password","matInput","","placeholder","Password","formControlName","password"],["password",""],["type","password","matInput","","placeholder","Confirm Password","formControlName","confirmPassword"],["confirmPassword",""],["type","text","matInput","","placeholder","Email","formControlName","email"],["email",""],["type","tel","matInput","","placeholder","Phone number","formControlName","phoneNumber"],["mat-dialog-actions","","align","end"],["mat-flat-button","","mat-dialog-close","","color","warn"],["mat-flat-button","","cdkFocusInitial","","color","primary","type","button",3,"click"]],template:function(e,r){if(1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"form",2,3)(5,"mat-card-content")(6,"mat-form-field",4)(7,"mat-label"),t._uU(8,"Enter Surname"),t.qZA(),t._UZ(9,"input",5,6),t.TgZ(11,"mat-hint",7),t._uU(12),t.qZA(),t.TgZ(13,"mat-error"),t._uU(14,"Surname is invalid"),t.qZA()(),t._UZ(15,"br")(16,"br"),t.TgZ(17,"mat-form-field",4)(18,"mat-label"),t._uU(19,"Enter Lastname"),t.qZA(),t._UZ(20,"input",8,9),t.TgZ(22,"mat-hint",7),t._uU(23),t.qZA(),t.TgZ(24,"mat-error"),t._uU(25,"Lastname is invalid"),t.qZA()(),t._UZ(26,"br")(27,"br"),t.TgZ(28,"mat-form-field",4)(29,"mat-label"),t._uU(30,"Enter Username"),t.qZA(),t._UZ(31,"input",10,11),t.TgZ(33,"mat-hint",7),t._uU(34),t.qZA(),t.TgZ(35,"mat-error"),t._uU(36,"Username is invalid"),t.qZA()(),t._UZ(37,"br")(38,"br"),t.TgZ(39,"mat-form-field",4)(40,"mat-label"),t._uU(41,"Enter Password"),t.qZA(),t._UZ(42,"input",12,13),t.TgZ(44,"mat-hint",7),t._uU(45),t.qZA(),t.TgZ(46,"mat-error"),t._uU(47,"Password is invalid"),t.qZA()(),t._UZ(48,"br")(49,"br"),t.TgZ(50,"mat-form-field",4)(51,"mat-label"),t._uU(52,"Confirm Password"),t.qZA(),t._UZ(53,"input",14,15),t.TgZ(55,"mat-hint",7),t._uU(56),t.qZA(),t.TgZ(57,"mat-error"),t._uU(58,"Passwords Mismatch"),t.qZA()(),t._UZ(59,"br")(60,"br"),t.TgZ(61,"mat-form-field",4)(62,"mat-label"),t._uU(63,"Enter Email"),t.qZA(),t._UZ(64,"input",16,17),t.TgZ(66,"mat-error"),t._uU(67,"Email is invalid"),t.qZA()(),t._UZ(68,"br")(69,"br"),t.TgZ(70,"mat-form-field",4)(71,"mat-label"),t._uU(72,"Enter Phone number"),t.qZA(),t._UZ(73,"input",18,15),t.TgZ(75,"mat-error"),t._uU(76,"Phone number is invalid"),t.qZA()()()()(),t.TgZ(77,"div",19)(78,"button",20),t._uU(79,"Cancle"),t.qZA(),t.TgZ(80,"button",21),t.NdJ("click",function(){return r.onSubmitEvent()}),t._uU(81),t.qZA()()),2&e){const i=t.MAs(10),l=t.MAs(21),c=t.MAs(32),f=t.MAs(43),g=t.MAs(54);t.xp6(1),t.Oqu(r.title),t.xp6(2),t.Q6J("formGroup",r.newUserForm),t.xp6(9),t.hij("",i.value.length,"/256"),t.xp6(11),t.hij("",l.value.length,"/256"),t.xp6(11),t.hij("",c.value.length,"/16"),t.xp6(11),t.hij("",f.value.length,"/64"),t.xp6(11),t.hij("",g.value.length,"/64"),t.xp6(25),t.Oqu(r.submitBtnText)}},dependencies:[a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,d.dn,Z.lW,p.KE,p.hX,p.bx,p.TO,T.Nt,u.ZT,u.uh,u.xY,u.H8],encapsulation:2}),n})();var q=s(7009),L=s(8907),F=s(3252),O=s(2633),R=s(6969);function J(n,o){1&n&&(t.TgZ(0,"th",15),t._uU(1," No. "),t.qZA())}function Q(n,o){if(1&n&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function M(n,o){1&n&&(t.TgZ(0,"th",15),t._uU(1," Full Name "),t.qZA())}function P(n,o){if(1&n&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.AsE(" ",e.firstName," ",e.lastName," ")}}function j(n,o){1&n&&(t.TgZ(0,"th",15),t._uU(1," Username "),t.qZA())}function $(n,o){if(1&n&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.username," ")}}function z(n,o){1&n&&(t.TgZ(0,"th",15),t._uU(1," Email "),t.qZA())}function G(n,o){if(1&n&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.email," ")}}function H(n,o){1&n&&(t.TgZ(0,"th",15),t._uU(1," Email Confirmed "),t.qZA())}function W(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1,"true"),t.qZA())}function X(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,l=t.oxw();return t.KtG(l.onConfirmEmailEvent(i.email))}),t._uU(1," Send Confirm Email "),t.qZA()}}function K(n,o){if(1&n&&(t.TgZ(0,"td",16),t.YNc(1,W,2,0,"span",17),t.YNc(2,X,2,0,"button",18),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.emailConfirmed),t.xp6(1),t.Q6J("ngIf",!e.emailConfirmed)}}function V(n,o){1&n&&(t.TgZ(0,"th",15),t._uU(1," Phone Number "),t.qZA())}function tt(n,o){if(1&n&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.phoneNumber," ")}}function et(n,o){1&n&&(t.TgZ(0,"th",20),t._uU(1," Actions "),t.qZA())}function nt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td",16)(1,"div",21)(2,"button",22),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onEditEvent(l))}),t._uU(3," Edit "),t.qZA(),t.TgZ(4,"button",23),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onDeleteEvent(l.id,l.username))}),t._uU(5,"Delete"),t.qZA()()()}}function rt(n,o){1&n&&t._UZ(0,"tr",24)}function ot(n,o){1&n&&t._UZ(0,"tr",25)}const at=function(){return[5,10,20]};let st=(()=>{class n{constructor(){this.displayedColumns=["fullName","username","email","emailConfirmed","phoneNumber","actions"],this.data=[],this.resultsLength=0,this.onChange=new t.vpe,this.onDelete=new t.vpe,this.onEdit=new t.vpe,this.onConfirmEmail=new t.vpe,this.userListOptions=new U.j("","",0,0)}ngAfterViewInit(){this.onChangeEvent(),this.sort.sortChange.subscribe(()=>{this.paginator.pageIndex=0,this.onChangeEvent()}),this.paginator.page.subscribe(()=>{this.onChangeEvent()})}onChangeEvent(){this.userListOptions.sort=this.sort.active,this.userListOptions.sortDirection=this.sort.direction,this.userListOptions.pageIndex=this.paginator.pageIndex,this.userListOptions.pageSize=this.paginator.pageSize,this.onChange.emit(this.userListOptions)}onDeleteEvent(e,r){this.onDelete.emit({id:e,username:r})}onEditEvent(e){this.onEdit.emit(e)}onConfirmEmailEvent(e){this.onConfirmEmail.emit(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dashboard-lecturers-card"]],viewQuery:function(e,r){if(1&e&&(t.Gf(m.BZ,5),t.Gf(h.YE,5),t.Gf(C.NW,5)),2&e){let i;t.iGM(i=t.CRH())&&(r.table=i.first),t.iGM(i=t.CRH())&&(r.sort=i.first),t.iGM(i=t.CRH())&&(r.paginator=i.first)}},inputs:{data:"data",resultsLength:"resultsLength"},outputs:{onChange:"onChange",onDelete:"onDelete",onEdit:"onEdit",onConfirmEmail:"onConfirmEmail"},decls:30,vars:6,consts:[[1,"card"],["mat-table","","matSort","","matSortActive","fullName","matSortDirection","asc","matSortDisableClear","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","fullName"],["matColumnDef","username"],["matColumnDef","email"],["matColumnDef","emailConfirmed"],["matColumnDef","phoneNumber"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"length","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngIf"],["mat-flat-button","","color","accent",3,"click",4,"ngIf"],["mat-flat-button","","color","accent",3,"click"],["mat-header-cell",""],[1,"actions-wrapper"],["mat-flat-button","","color","accent",1,"action-btn",3,"click"],["mat-flat-button","","color","warn",1,"action-btn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,r){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),t._uU(3," Lecturers "),t.qZA()(),t.TgZ(4,"mat-card-content")(5,"table",1),t.ynx(6,2),t.YNc(7,J,2,0,"th",3),t.YNc(8,Q,2,1,"td",4),t.BQk(),t.ynx(9,5),t.YNc(10,M,2,0,"th",3),t.YNc(11,P,2,2,"td",4),t.BQk(),t.ynx(12,6),t.YNc(13,j,2,0,"th",3),t.YNc(14,$,2,1,"td",4),t.BQk(),t.ynx(15,7),t.YNc(16,z,2,0,"th",3),t.YNc(17,G,2,1,"td",4),t.BQk(),t.ynx(18,8),t.YNc(19,H,2,0,"th",3),t.YNc(20,K,3,2,"td",4),t.BQk(),t.ynx(21,9),t.YNc(22,V,2,0,"th",3),t.YNc(23,tt,2,1,"td",4),t.BQk(),t.ynx(24,10),t.YNc(25,et,2,0,"th",11),t.YNc(26,nt,6,0,"td",4),t.BQk(),t.YNc(27,rt,1,0,"tr",12),t.YNc(28,ot,1,0,"tr",13),t.qZA(),t._UZ(29,"mat-paginator",14),t.qZA()()),2&e&&(t.xp6(5),t.Q6J("dataSource",r.data),t.xp6(22),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(1),t.Q6J("length",r.resultsLength)("pageSizeOptions",t.DdM(5,at)))},dependencies:[v.O5,d.a8,d.dn,d.dk,d.n5,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,C.NW,h.YE,h.nU,Z.lW],encapsulation:2}),n})();const it=[{path:"",component:(()=>{class n{constructor(e,r,i,l){this.dialog=e,this._snackBar=r,this.lecturersService=i,this.authService=l,this.data=[],this.resultsLength=0}onChangeUserCard(e){this.userListOptions=e,this.getUsers()}getUsers(){this.lecturersService.getAll(new U.j(this.userListOptions.sort,this.userListOptions.sortDirection,this.userListOptions.pageIndex,this.userListOptions.pageSize)).subscribe(e=>{this.data=e.entities,this.resultsLength=e.totalCount})}onNew(){this.openNewDialog()}openNewDialog(){this.createDialogRef=this.dialog.open(b,{width:"500px",data:{user:new k("","","","","","",!1,"")}}),this.createDialogRef.componentInstance.title="Create new Lecturer",this.createDialogRef.componentInstance.submitBtnText="Create",this.createDialogRef.componentInstance.onSubmit.subscribe(e=>{this.new(e)})}new(e){this.lecturersService.create(e.user).subscribe({next:r=>{this._snackBar.open("User created successful!","Ok",{duration:1e4}),this.createDialogRef.close(),this.getUsers()},error:r=>{this._snackBar.open("Validating error!","Ok",{duration:1e4})}})}onDelete(e){this.openDeleteDialog(e.id,e.username)}openDeleteDialog(e,r){this.dialog.open(S.F,{width:"250px",data:{value:r,isDelete:"false"}}).afterClosed().subscribe(l=>{l&&this.delete(e)})}delete(e){this.lecturersService.delete(e).subscribe(()=>{this._snackBar.open("User deleted!","Ok",{duration:1e4}),this.getUsers()})}onEdit(e){this.openEditDialog(e)}openEditDialog(e){this.createDialogRef=this.dialog.open(b,{width:"500px",data:{user:e}}),this.createDialogRef.componentInstance.title="Edit Lecturer",this.createDialogRef.componentInstance.submitBtnText="Edit",this.createDialogRef.componentInstance.onSubmit.subscribe(r=>{this.edit(r.id,r.user)})}edit(e,r){this.lecturersService.edit(e,r).subscribe(i=>{this._snackBar.open(i.username+" user changed!","Ok",{duration:1e4}),this.createDialogRef.close(),this.getUsers()})}onConfirmEmail(e){console.log(e),this.authService.sendConfirmEmail(e).subscribe(r=>{this._snackBar.open("Message sended!","Ok",{duration:1e4})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.uw),t.Y36(q.ux),t.Y36(L.W),t.Y36(F.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dashboard-admins"]],decls:3,vars:2,consts:[[3,"onNew"],[3,"data","resultsLength","onChange","onDelete","onEdit","onConfirmEmail"]],template:function(e,r){1&e&&(t.TgZ(0,"app-dashboard-layout")(1,"app-dashboard-actions-new",0),t.NdJ("onNew",function(){return r.onNew()}),t.qZA(),t.TgZ(2,"app-dashboard-lecturers-card",1),t.NdJ("onChange",function(l){return r.onChangeUserCard(l)})("onDelete",function(l){return r.onDelete(l)})("onEdit",function(l){return r.onEdit(l)})("onConfirmEmail",function(l){return r.onConfirmEmail(l)}),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("data",r.data)("resultsLength",r.resultsLength))},dependencies:[O.n,R.h,st],encapsulation:2}),n})()}];let lt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[L.W],imports:[I.m,N.Bz.forChild(it),a.u5,a.UX,v.ez,d.QW,m.p0,C.TU,h.JX,Z.ot,w.Ps,x.ie,p.lN,T.c,u.Is,A.Hi,D.Bb,E.Fk]}),n})()}}]);